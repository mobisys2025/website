{{ $csv := .Get 0 }}
{{ $separator := .Get 1 | default "," }}

{{ $resource := resources.Get $csv }}
{{ $data := $resource | transform.Unmarshal (dict "delimiter" $separator) }}

<div class="split">
    <table>
        <tbody>
            {{ range $row := $data }}
            {{ $isDue := and (gt (len $row) 2) (eq (index $row 2) "due") }}
            <tr{{ if $isDue }} class="due"{{ end }}>
                {{ range $index, $cell := $row }}
                {{ if eq $index 0 }}
                    <td><strong>{{ . }}</strong></td>
                {{ else if ne $index 2 }}
                    <td>{{ . }}</td>
                {{ end }}
                {{ end }}
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>
